@using DirigoEdgeCore.Utils
@{

    int count = 0;
    foreach (var blog in Model)
    {
        string tags = blog.Tags + "," + blog.MainCategory;
        count++;

        <article class="blogArticle blog col-lg-12" data-id="@blog.BlogId" data-tags="@tags.ToLower()">

            @{
                var blogAuthor = "Anonymous";
                var blogAuthorUrl = "#";
                if (blog.Author != "")
                {
                    blogAuthor = blog.Author;
                    blogAuthorUrl = blog.BlogAuthorUrl + "/" ?? "#";
                }
                if (!String.IsNullOrEmpty(blog.ImageUrl))
                {
                    var img = blog.ImageUrl;
                    if (img.StartsWith("http://") || img.StartsWith("https://"))
                    {
                        img = img.Replace("http://", "//").Replace("https://", "//");
                    }
                    else
                    {
                        img = "/images/medium" + img;
                    }
                    <img class="img-responsive" src="@img"/>
                }
         
            }
            <h4>
                <a href="/blog/@ContentUtils.GetFormattedUrl(blog.MainCategory)/@blog.PermaLink">@blog.Title</a>
            </h4>
            
            @{
                string inCategoryLanguage = String.IsNullOrEmpty(blog.MainCategory) ? "" : " in <a class='categoryLink' href='/blog/" + ContentUtils.GetFormattedUrl(blog.MainCategory) + "'/>" + blog.MainCategory + "</a>";
            }
            <p class="byLine">Written by <a href="@blogAuthorUrl">@ContentUtils.GetBlogUserDisplayName(blogAuthor)</a>@Html.Raw(inCategoryLanguage)</p>
            <p class="dateLine">@blog.Date.ToLongDateString()</p>
            
            <div class="row">
                <div class="userBlogContent col-lg-12">
                    @Html.Raw(blog.ShortDesc)
                </div>
            </div>
        </article>
    }
}